
<!DOCTYPE html>
<html lang="en">
<head>
<title>Categories</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="Colo Shop Template">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='styles/bootstrap4/bootstrap.min.css')}}">
<link href="{{url_for('static',filename='plugins/font-awesome-4.7.0/css/font-awesome.min.css')}}" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='plugins/OwlCarousel2-2.2.1/owl.carousel.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='plugins/font-awesome-4.7.0/css/font-awesome.min.cssplugins/OwlCarousel2-2.2.1/owl.theme.default.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='plugins/OwlCarousel2-2.2.1/animate.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='plugins/jquery-ui-1.12.1.custom/jquery-ui.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='styles/categories_styles.css')}}">
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='styles/categories_responsive.css')}}">
</head>

<body>

<div class="super_container">

	<!-- Header -->
    <header class="header trans_300">

		<!-- Top Navigation -->

		<div class="top_nav">
			<div class="container">
				<div class="row">
					<div class="col-md-6">
						<div class="top_nav_left">free shipping on all orders</div>
					</div>
					<div class="col-md-6 text-right">
						<div class="top_nav_right">
							<ul class="top_nav_menu">

								<!-- Currency / Language / My Account -->

								<li class="currency">
									<a href="#">
										usd
										<i class="fa fa-angle-down"></i>
									</a>
									<ul class="currency_selection">
										<li><a href="#">cad</a></li>
										<li><a href="#">aud</a></li>
										<li><a href="#">eur</a></li>
										<li><a href="#">gbp</a></li>
									</ul>
								</li>
								<li class="language">
									<a href="#">
										English
										<i class="fa fa-angle-down"></i>
									</a>
									<ul class="language_selection">
										<li><a href="#">French</a></li>
										<li><a href="#">Italian</a></li>
										<li><a href="#">German</a></li>
										<li><a href="#">Spanish</a></li>
									</ul>
								</li>
								<li class="account">
									<a href="#">
										My Account
										<i class="fa fa-angle-down"></i>
									</a>
                                    <ul class="account_selection">
                                        {%if current_user.is_authenticated%}
                                        <li><a href="{{url_for('logout')}}">Log out</a></li>
                                        {%else%}
    									<li><a href="{{url_for('login')}}"><i class="fa fa-sign-in" aria-hidden="true"></i>Sign In</a></li>
										<li><a href="{{url_for('register')}}"><i class="fa fa-user-plus" aria-hidden="true"></i>Register</a></li>
	                                    {%endif%}
									</ul>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Main Navigation -->

		<div class="main_nav_container">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 text-right">
						<div class="logo_container">
							<a href="#">Purple<span>Star</span></a>
						</div>
						<nav class="navbar">
							<ul class="navbar_menu">
								<li><a href="{{url_for('home')}}">home</a></li>
								<li><a href="{{url_for('categories')}}">shop</a></li>
								<li><a href="{{url_for('textbook')}}">Books</a></li>
								<li class="menu_item">
									<a href="#">Pages</a>
									<ul class="dropdown">
										<li><a href="#">Page 1</a></li>
										<li><a href="#">Page 2</a></li>
										<li><a href="#">Page 3</a></li>
									</ul>
								</li>
								
								<li><a href="{{url_for('contact')}}">contact</a></li>
                                {%if current_user.is_authenticated%}
                                <li><a href="{{url_for('logout')}}">Log out</a></li>
                                {%else%}
                                <li><a href="{{url_for('register')}}">Register</a></li>
                                <li><a href="{{url_for('login')}}">Login</a></li>
                                {%endif%}
                            </ul>
							<ul class="navbar_user">
								<li><a href="#"><i class="fa fa-search" aria-hidden="true"></i></a></li>
								<li><a href="#"><i class="fa fa-user" aria-hidden="true"></i></a></li>
								<div id="cart-panel" class="cart-panel">
									<h3>Your Cart</h3>
									<div id="cart-items-container"></div>
								</div>
								
								<li class="checkout">
									<a href="#" onclick="toggleCart();updateCartPanel();">
										<i class="fa fa-shopping-cart" aria-hidden="true"></i>
									</a>
								</li>
								<!-- Cart Panel for Right Slide -->
								
							</ul>
							<div class="hamburger_container">
								<i class="fa fa-bars" aria-hidden="true"></i>
							</div>
						</nav>
					</div>
				</div>
			</div>
		</div>

	</header>
	  
	<script>
        // Load navbar and footer
        function includeHTML() {
            const navbar = document.getElementById("navbar");
            const footer = document.getElementById("footer");

            fetch("navbar.html")
                .then(response => response.text())
                .then(data => navbar.innerHTML = data);

            fetch("footer.html")
                .then(response => response.text())
                .then(data => footer.innerHTML = data);
        }

        // Call the function on page load
        includeHTML();
    </script>

	<!-- Navbar Start -->

	<div class="fs_menu_overlay"></div>

	<!-- Hamburger Menu -->

	<div class="hamburger_menu">
		<div class="hamburger_close"><i class="fa fa-times" aria-hidden="true"></i></div>
		<div class="hamburger_menu_content text-right">
			<ul class="menu_top_nav">
				<li class="menu_item has-children">
					<a href="#">
						usd
						<i class="fa fa-angle-down"></i>
					</a>
					<ul class="menu_selection">
						<li><a href="#">cad</a></li>
						<li><a href="#">aud</a></li>
						<li><a href="#">eur</a></li>
						<li><a href="#">gbp</a></li>
					</ul>
				</li>
				<li class="menu_item has-children">
					<a href="#">
						English
						<i class="fa fa-angle-down"></i>
					</a>
					<ul class="menu_selection">
						<li><a href="#">French</a></li>
						<li><a href="#">Italian</a></li>
						<li><a href="#">German</a></li>
						<li><a href="#">Spanish</a></li>
					</ul>
				</li>
				<li class="menu_item has-children">
					<a href="#">
						My Account
						<i class="fa fa-angle-down"></i>
					</a>
					<ul class="menu_selection">
						<li><a href="{{url_for('logout')}}"><i class="fa fa-sign-in" aria-hidden="true"></i>Sign In</a></li>
						<!-- <li><a href="#"><i class="fa fa-user-plus" aria-hidden="true"></i>Register</a></li> -->
					</ul>
				</li>
				<li class="menu_item"><a href="#">home</a></li>
				<li class="menu_item"><a href="{{url_for('categories')}}">shop</a></li>
				<li class="menu_item"><a href="#">promotion</a></li>
				<li class="menu_item">
					<a href="#">Pages</a>
					<ul class="dropdown">
						<li><a href="#">Page 1</a></li>
						<li><a href="#">Page 2</a></li>
						<li><a href="#">Page 3</a></li>
					</ul>
				</li>
				
				<li class="menu_item"><a href="{{url_for('single')}}">blog</a></li>
				<li class="menu_item"><a href="{{url_for('contact')}}">contact</a></li>
			</ul>
		</div>
	</div>

	
	<div class="content-section">
		{% with messages=get_flashed_messages(with_categories=true) %}
		{% if messages %}
			{% for category, message in messages %}
				<div class="alert alert-{{ category }}">
					{{ message }}
				</div>
			{% endfor %}
		{% endif %}
		{% endwith %}
	</div>

	<div class="container product_section_container">
		<div class="row">
			<div class="col product_section clearfix">

				<!-- Breadcrumbs -->

				<div class="breadcrumbs d-flex flex-row align-items-center">
					<ul>
						<li><a href="{{url_for('home')}}">Home</a></li>
						<li class="active"><a href="{{url_for('home')}}"><i class="fa fa-angle-right" aria-hidden="true"></i>Items</a></li>
					</ul>
				</div>

				<!-- Sidebar -->
                <div class="sidebar">
                    <!-- Product Category -->
                    <div class="sidebar_section">
                        <div class="sidebar_title">
                            <h5>Product Category</h5>
                        </div>
                        <ul class="sidebar_categories">
                            <li><a href="#" data-filter="*">All</a></li>
                            <li><a href="#" data-filter=".pens">Pens</a></li>
                            <li><a href="#" data-filter=".papers">Papers</a></li>
                            <li><a href="#" data-filter=".notebooks">Notebooks</a></li>
                            <li><a href="#" data-filter=".office-supplies">Office Supplies</a></li>
                            <li><a href="#" data-filter=".writing-tools">Writing Tools</a></li>
                            <li><a href="#" data-filter=".other-stationery">Other Stationery</a></li>
                        </ul>
                    </div>

                    <!-- Price Range Filtering -->
                    <div class="sidebar_section">
                        <div class="sidebar_title">
                            <h5>Filter by Price</h5>
                        </div>
                        <p>
                            <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold;">
                        </p>
                        <div id="slider-range"></div>
                        <div class="filter_button">
                            <span>Filter</span>
                        </div>
                    </div>

                    <!-- Sizes -->
                    <div class="sidebar_section">
                        <div class="sidebar_title">
                            <h5>Paper Size</h5>
                        </div>
                        <ul class="checkboxes">
                            <li><input type="checkbox" data-filter=".a4"><span>A4</span></li>
                            <li><input type="checkbox" data-filter=".a5"><span>A5</span></li>
                            <li><input type="checkbox" data-filter=".a3"><span>A3</span></li>
                            <li><input type="checkbox" data-filter=".legal"><span>Legal</span></li>
                        </ul>
                    </div>

                    <!-- Color -->
                    <div class="sidebar_section">
                        <div class="sidebar_title">
                            <h5>Color</h5>
                        </div>
                        <ul class="checkboxes">
                            <li><input type="checkbox" data-filter=".black"><span>Black</span></li>
                            <li><input type="checkbox" data-filter=".blue"><span>Blue</span></li>
                            <li><input type="checkbox" data-filter=".red"><span>Red</span></li>
                            <li><input type="checkbox" data-filter=".green"><span>Green</span></li>
                            <li><input type="checkbox" data-filter=".yellow"><span>Yellow</span></li>
                        </ul>
                    </div>
                </div>
                                

				<!-- Main Content -->

				<div class="main_content">

					<!-- Products -->

					<div class="products_iso">
						<div class="row">
							<div class="col">

								<!-- Product Sorting -->

								<div class="product_sorting_container product_sorting_container_top">
									<ul class="product_sorting">
										<li>
											<span class="type_sorting_text">Default Sorting</span>
											<i class="fa fa-angle-down"></i>
											<ul class="sorting_type">
												<li class="type_sorting_btn" data-isotope-option='{ "sortBy": "original-order" }'><span>Default Sorting</span></li>
												<li class="type_sorting_btn" data-isotope-option='{ "sortBy": "price" }'><span>Price</span></li>
												<li class="type_sorting_btn" data-isotope-option='{ "sortBy": "name" }'><span>Product Name</span></li>
											</ul>
										</li>
										<li>
											<span>Show</span>
											<span class="num_sorting_text">6</span>
											<i class="fa fa-angle-down"></i>
											<ul class="sorting_num">
												<li class="num_sorting_btn"><span>6</span></li>
												<li class="num_sorting_btn"><span>12</span></li>
												<li class="num_sorting_btn"><span>24</span></li>
											</ul>
										</li>
									</ul>
									<div class="pages d-flex flex-row align-items-center">
										<div class="page_current">
											<span>1</span>
											<ul class="page_selection">
												<li><a href="#">1</a></li>
												<li><a href="#">2</a></li>
												<li><a href="#">3</a></li>
											</ul>
										</div>
										<div class="page_total"><span>of</span> 3</div>
										<div id="next_page" class="page_next"><a href="#"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></a></div>
									</div>

								</div>
                                <!-- Product Grid -->
                                <div class="product-grid">
                                    <div class="row">
                                        <div class="col">
                                            <!-- Product Items -->
											{% if products %}
											{% for product in products %}
												<div class="product-item {{ product.category|lower|replace(' ', '-') }}">
													<div class="product discount product_filter">
														<div class="product_image">
															<img src="{{ url_for('static', filename='product_images/' + product.image_file) }}" alt="{{ product.name }}">
														</div>  
														<div class="product_info">
															<h6 class="product_name"><a href="{{ url_for('single', product_id=product.id) }}">{{ product.name }}</a></h6>
														</div>
													</div>
													<div class="red_button add_to_cart_button">
														<form method="POST" action="{{ url_for('addtocart',product_id=product.id) }}">
															{{ form.hidden_tag() }} <!-- Include CSRF token -->
															{{ form.submit() }} <!-- Use the form's submit button -->
															{{ form.product_id(value=product.id ) }} 
														</form>
													</div>
												</div>
											{% endfor %}
										{% else %}
											<h1>No products</h1>
										{% endif %}
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="footer_nav_container d-flex flex-sm-row flex-column align-items-center justify-content-lg-start justify-content-center text-center">
                    <ul class="footer_nav">
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">FAQs</a></li>
                        <li><a href="{{url_for('contact')}}">Contact us</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="footer_social d-flex flex-row align-items-center justify-content-lg-end justify-content-center">
                    <ul>
                        <li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-skype" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="footer_nav_container">
                    <div class="cr">©2024 All Rights Reserverd. Made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="#">Purple</a> &amp; distributed by <a href="">Syed Mustafa</a></div>
                </div>
            </div>
        </div>
    </div>
</footer>
<script src="{{url_for('static',filename='plugins/jquery-ui-1.12.1.custom/jquery-ui.js')}}"></script>
<script src="{{url_for('static',filename='js/jquery-3.2.1.min.js')}}"></script>
<script src="{{url_for('static',filename='styles/bootstrap4/popper.js')}}"></script>
<script src="{{url_for('static',filename='styles/bootstrap4/bootstrap.min.js')}}"></script>
<script src="{{url_for('static',filename='plugins/Isotope/isotope.pkgd.min.js')}}"></script>
<script src="{{url_for('static',filename='plugins/OwlCarousel2-2.2.1/owl.carousel.js')}}"></script>
<script src="{{url_for('static',filename='plugins/easing/easing.js')}}"></script>
<script src="{{url_for('static',filename='js/custom.js')}}"></script>
{% if msg %}
    <h1>{{ msg }}</h1>
{% endif %}

<script>
	// Function to toggle the visibility of the cart panel
function toggleCart() {
    const cartPanel = document.getElementById("cart-panel");
    cartPanel.classList.toggle("active");
}
// Function to update the cart panel with items from the server
function updateCartPanel() {
    const cartItemsContainer = document.getElementById("cart-items-container");
    cartItemsContainer.innerHTML = ''; // Clear previous cart items

    // Fetch cart items from the server
    fetch('/getcart')
        .then(response => response.json())
        .then(cartItems => {
            // Add each item to the cart panel
            cartItems.forEach(item => {
                const cartItem = document.createElement("div");
                cartItem.classList.add("cart-item"); // Add a class for styling

                cartItem.innerHTML = `
                    <div class="cart-item-content">
                        <img src="${item.image || 'images/fallback.png'}" alt="${item.productname}" class="cart-item-image" 
                             onerror="this.onerror=null; this.src='images/fallback.png';">
                        <div class="cart-item-details">
                            <h4 class="product-name">${item.productname}</h4>
                            <p class="product-price">$${item.price.toFixed(2)}</p>
                            <button class="remove-item" onclick="removeFromCart(${item.product_id})">Remove</button>
                        </div>
                    </div>
                `;

			
                cartItemsContainer.appendChild(cartItem);
            });

			const closeButton = document.createElement("button");
            closeButton.classList.add("close-cart");
            closeButton.innerText = "Close";
            closeButton.onclick = toggleCart; // Bind the toggleCart function
            closeButton.style.marginTop = "100px"; // Shift the button down by 100 pixels
            cartItemsContainer.appendChild(closeButton);
        })
        .catch(error => console.error('Error fetching cart items:', error));
}

// Function to remove an item from the cart
function removeFromCart(productId) {
    fetch(`/removecart/${productId}`, { method: 'POST' })
        .then(response => {
            if (response.ok) {
                updateCartPanel();  // Refresh the cart display
            } else {
                console.error('Failed to remove item from cart:', response.statusText);
            }
        })
        .catch(error => console.error('Error removing item from cart:', error));


		
}

</script>

</body>

</html>
